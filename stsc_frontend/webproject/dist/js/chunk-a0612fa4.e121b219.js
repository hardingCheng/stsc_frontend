(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a0612fa4"],{"0cb2":function(e,t,r){var a=r("7b0b"),n=Math.floor,i="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,l,c,u){var d=r+e.length,f=l.length,p=o;return void 0!==c&&(c=a(c),p=s),i.call(u,p,(function(a,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(d);case"<":s=c[i.slice(1,-1)];break;default:var o=+i;if(0===o)return a;if(o>f){var u=n(o/10);return 0===u?a:u<=f?void 0===l[u-1]?i.charAt(1):l[u-1]+i.charAt(1):a}s=l[o-1]}return void 0===s?"":s}))}},1900:function(e,t,r){"use strict";r("64ea")},"4de4":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").filter,i=r("1dde"),s=i("filter");a({target:"Array",proto:!0,forced:!s},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},5319:function(e,t,r){"use strict";var a=r("d784"),n=r("825a"),i=r("50c4"),s=r("a691"),o=r("1d80"),l=r("8aa5"),c=r("0cb2"),u=r("14c3"),d=Math.max,f=Math.min,p=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,r,a){var m=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=a.REPLACE_KEEPS_$0,h=m?"$":"$0";return[function(r,a){var n=o(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,n,a):t.call(String(n),r,a)},function(e,a){if(!m&&g||"string"===typeof a&&-1===a.indexOf(h)){var o=r(t,e,this,a);if(o.done)return o.value}var v=n(e),b=String(this),x="function"===typeof a;x||(a=String(a));var y=v.global;if(y){var k=v.unicode;v.lastIndex=0}var $=[];while(1){var R=u(v,b);if(null===R)break;if($.push(R),!y)break;var w=String(R[0]);""===w&&(v.lastIndex=l(b,i(v.lastIndex),k))}for(var L="",C=0,I=0;I<$.length;I++){R=$[I];for(var U=String(R[0]),S=d(f(s(R.index),b.length),0),_=[],q=1;q<R.length;q++)_.push(p(R[q]));var E=R.groups;if(x){var O=[U].concat(_,S,b);void 0!==E&&O.push(E);var T=String(a.apply(void 0,O))}else T=c(U,b,S,_,E,a);S>=C&&(L+=b.slice(C,S)+T,C=S+U.length)}return L+b.slice(C)}]}))},"64ea":function(e,t,r){},"6fc8":function(e,t,r){},"85e0":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"breadcrumb"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:"/"}},[e._v("首页")]),e._l(e.routeInfo,(function(t,a){return r("el-breadcrumb-item",{key:a,attrs:{to:t.path}},[e._v(" "+e._s(t.title)+" ")])}))],2)],1)},n=[],i=(r("4de4"),r("b0c0"),r("d81d"),r("99af"),{props:{info:{type:Array}},name:"BreadCrumb",data:function(){return{routeInfo:[]}},mounted:function(){var e=this.$route.matched;e=e.filter((function(e){return e&&e.meta&&e.meta.name}));var t=e.map((function(e){return{path:e.path,title:e.meta.name}}));this.routeInfo=[].concat(t)},watch:{$route:{handler:function(e,t){},immediate:!0}}}),s=i,o=(r("d6ae"),r("2877")),l=Object(o["a"])(s,a,n,!1,null,"69a4e4d3",null);t["a"]=l.exports},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),i=r("a691"),s=r("50c4"),o=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),d=u("splice"),f=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var r,a,u,d,h,v,b=o(this),x=s(b.length),y=n(e,x),k=arguments.length;if(0===k?r=a=0:1===k?(r=0,a=x-y):(r=k-2,a=p(f(i(t),0),x-y)),x+r-a>m)throw TypeError(g);for(u=l(b,a),d=0;d<a;d++)h=y+d,h in b&&c(u,d,b[h]);if(u.length=a,r<a){for(d=y;d<x-a;d++)h=d+a,v=d+r,h in b?b[v]=b[h]:delete b[v];for(d=x;d>x-a+r;d--)delete b[d-1]}else if(r>a)for(d=x-a;d>y;d--)h=d+a-1,v=d+r-1,h in b?b[v]=b[h]:delete b[v];for(d=0;d<r;d++)b[d+y]=arguments[d+2];return b.length=x-a+r,u}})},d5be:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"send-service"},[r("div",{staticClass:"container"},[r("bread-crumb",{attrs:{info:e.info}}),e._m(0),r("div",{staticClass:"send-service-form"},[r("el-form",{ref:"serviceform",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("div",{staticClass:"form-main"},[r("span",{staticClass:"form-group-title"},[e._v("服务基本信息")]),r("el-form-item",{attrs:{label:"服务名称：",prop:"name"}},[r("el-input",{attrs:{placeholder:"请填写需求名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"单位名称：",prop:"company"}},[r("el-input",{attrs:{placeholder:"请填写需求单位"},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1),r("el-form-item",{attrs:{label:"单位地址：",prop:"address"}},[r("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),r("span",{staticClass:"form-group-title"},[e._v("联系人信息")]),r("el-form-item",{attrs:{label:"联系人：",prop:"contact"}},[r("el-input",{model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),r("el-form-item",{attrs:{label:"联系方式：",prop:"telephone"}},[r("el-input",{model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),r("span",{staticClass:"form-group-title"},[e._v("服务价格及介绍")]),r("el-form-item",{attrs:{label:"上传图片："}},[r("el-upload",{ref:"uploadimage",staticClass:"upload-demo",attrs:{action:"/bh/stcsp/fileoss/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove1,"on-success":e.handleSuccess1,"file-list":e.fileList1,"auto-upload":!1,"list-type":"picture","on-change":e.changeUpload1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1),r("el-form-item",{attrs:{label:"服务价格：",prop:"price"}},[r("el-input-number",{attrs:{precision:2,step:.1,max:10},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" 万 ")],1),r("el-form-item",{attrs:{label:"服务工期：",prop:"deadline"}},[r("el-input",{model:{value:e.form.deadline,callback:function(t){e.$set(e.form,"deadline",t)},expression:"form.deadline"}})],1),r("el-form-item",{attrs:{label:"所属分类：",prop:"categoryId"}},[r("el-cascader",{attrs:{options:e.options,props:{checkStrictly:!0},clearable:""},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),r("el-form-item",{attrs:{label:"关键词：",prop:"keywords"}},[e._l(e.dynamicTags,(function(t){return r("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(r){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 关键字")])],2),r("el-form-item",{attrs:{label:"企业简介：",prop:"companyIntroduction"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.companyIntroduction,callback:function(t){e.$set(e.form,"companyIntroduction",t)},expression:"form.companyIntroduction"}})],1),r("el-form-item",{attrs:{label:"服务简介：",prop:"serviceDescription"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.serviceDescription,callback:function(t){e.$set(e.form,"serviceDescription",t)},expression:"form.serviceDescription"}})],1),r("el-form-item",{attrs:{label:"专家简介：",prop:"expertIntroduction"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.expertIntroduction,callback:function(t){e.$set(e.form,"expertIntroduction",t)},expression:"form.expertIntroduction"}})],1),r("el-form-item",{attrs:{label:"上传附件："}},[r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/bh/stcsp/fileoss/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList,"on-change":e.changeUpload,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1),r("el-form-item",[e.id?r("el-button",{attrs:{type:"primary"},on:{click:e.onUpdate}},[e._v("立即更新")]):r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即发布")]),r("el-button",[e._v("重置")])],1)],1)])],1)],1)])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"send-service-title"},[r("h1",[e._v("免费发布服务")])])}],i=r("1da1"),s=(r("96cf"),r("5319"),r("ac1f"),r("1276"),r("fb6a"),r("d3b7"),r("25f0"),r("a434"),r("d81d"),r("b0c0"),r("85e0")),o={props:["id"],name:"SendService",components:{BreadCrumb:s["a"]},data:function(){return{form:{name:"",company:"",address:"",contact:"",telephone:"",price:"",deadline:"",companyIntroduction:"",serviceDescription:"",expertIntroduction:"",keywords:"",categoryId:"",attachment:"",image:""},rules:{name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],company:[{required:!0,message:"请输入单位名称",trigger:"blur"}],address:[{required:!0,message:"请输入单位地址",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],telephone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],price:[{required:!0,message:"请输入服务价格",trigger:"blur"}],deadline:[{required:!0,message:"请输入服务工期",trigger:"blur"}],companyIntroduction:[{required:!0,message:"请输入企业简介",trigger:"blur"}],serviceDescription:[{required:!0,message:"请输入服务简介",trigger:"blur"}],expertIntroduction:[{required:!0,message:"请输入专家简介",trigger:"blur"}],categoryId:[{required:!0,message:"请输入所属分类",trigger:"blur"}]},fileList:[],fileList1:[],disabled:!1,options:[],category:[],info:[{title:"发服务",path:""}],dynamicTags:[],inputVisible:!1,inputValue:"",fileRemoveList:[],filerReadyUploadList:[],filerReadyUploadList1:[],updateStatus:!1}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.categoryControllerList.getCategory({});case 2:if(r=t.sent,e.options=r.data.firstCategoryList,e.options=JSON.parse(JSON.stringify(e.options).replace(/id/g,"value").replace(/name/g,"label")),!e.id){t.next=14;break}return t.next=8,e.$axios.serveControllerList.getServesDetailById({id:e.id});case 8:a=t.sent,e.form=a.data.serve,e.category=a.data.serve.categoryId.split(","),e.dynamicTags=a.data.serve.keywords.split(","),a.data.serve.attachment&&(n=a.data.serve.attachment.split("/").slice(-1)[0],e.fileList.push({name:n,url:a.data.serve.attachment})),a.data.serve.image&&(i=a.data.serve.image.split("/").slice(-1)[0],e.fileList1.push({name:i,url:a.data.serve.image}));case 14:case"end":return t.stop()}}),t)})))()},watch:{form:{handler:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.updateStatus){t.next=34;break}if(0===r.filerReadyUploadList1.length||0===r.filerReadyUploadList.length){t.next=12;break}if(""===e.image||""===e.attachment){t.next=10;break}return t.next=5,r.$axios.serveControllerList.releaseServe(r.form);case 5:if(a=t.sent,2e4!==a.code){t.next=10;break}return r.$message({message:"发布服务成功,请前往个人中心查看！",type:"success"}),t.next=10,r.$router.push("/index");case 10:t.next=32;break;case 12:if(0===r.filerReadyUploadList.length||0!==r.filerReadyUploadList1.length){t.next=23;break}if(""===e.attachment){t.next=21;break}return t.next=16,r.$axios.serveControllerList.releaseServe(r.form);case 16:if(n=t.sent,2e4!==n.code){t.next=21;break}return r.$message({message:"发布服务成功,请前往个人中心查看！",type:"success"}),t.next=21,r.$router.push("/index");case 21:t.next=32;break;case 23:if(0!==r.filerReadyUploadList.length||0===r.filerReadyUploadList1.length){t.next=32;break}if(""===e.image){t.next=32;break}return t.next=27,r.$axios.serveControllerList.releaseServe(r.form);case 27:if(i=t.sent,2e4!==i.code){t.next=32;break}return r.$message({message:"发布服务成功,请前往个人中心查看！",type:"success"}),t.next=32,r.$router.push("/index");case 32:t.next=65;break;case 34:if(0===r.filerReadyUploadList1.length||0===r.filerReadyUploadList.length){t.next=45;break}if(""===e.image||""===e.attachment){t.next=43;break}return t.next=38,r.$axios.requirementControllerList.updateRequireById(r.form);case 38:if(s=t.sent,2e4!==s.code){t.next=43;break}return r.$message({message:"修改服务成功,请前往个人中心查看！",type:"success"}),t.next=43,r.$router.push("/seller/myservice");case 43:t.next=65;break;case 45:if(0===r.filerReadyUploadList.length||0!==r.filerReadyUploadList1.length){t.next=56;break}if(""===e.attachment){t.next=54;break}return t.next=49,r.$axios.requirementControllerList.updateRequireById(r.form);case 49:if(o=t.sent,2e4!==o.code){t.next=54;break}return r.$message({message:"修改服务成功,请前往个人中心查看！",type:"success"}),t.next=54,r.$router.push("/seller/myservice");case 54:t.next=65;break;case 56:if(0!==r.filerReadyUploadList.length||0===r.filerReadyUploadList1.length){t.next=65;break}if(""===e.image){t.next=65;break}return t.next=60,r.$axios.requirementControllerList.updateRequireById(r.form);case 60:if(l=t.sent,2e4!==l.code){t.next=65;break}return r.$message({message:"修改服务成功,请前往个人中心查看！",type:"success"}),t.next=65,r.$router.push("/seller/myservice");case 65:case"end":return t.stop()}}),t)})))()},deep:!0}},methods:{onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.categoryId=e.category.toString(),t.next=3,e.$refs["serviceform"].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}if(0!==e.filerReadyUploadList1.length&&e.$refs.uploadimage.submit(),0!==e.filerReadyUploadList.length&&e.$refs.upload.submit(),0!==e.filerReadyUploadList1.length||0!==e.filerReadyUploadList.length){t.next=11;break}return t.next=6,e.$axios.serveControllerList.releaseServe(e.form);case 6:if(a=t.sent,2e4!==a.code){t.next=11;break}return e.$message({message:"发布服务成功,请前往个人中心查看！",type:"success"}),t.next=11,e.$router.push("/index");case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},handleSuccess:function(e,t,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2e4===e.code&&""!==e.data.url&&(a.form.attachment=e.data.url);case 1:case"end":return t.stop()}}),t)})))()},handleSuccess1:function(e,t,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:2e4===e.code&&""!==e.data.url&&(a.form.image=e.data.url);case 1:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){"ready"!==(null===e||void 0===e?void 0:e.status)&&this.fileRemoveList.push(e),this.fileList=t},handleRemove1:function(e,t){"ready"!==(null===e||void 0===e?void 0:e.status)&&this.fileRemoveList.push(e),this.fileList1=t},handlePreview:function(e){console.log(e)},changeUpload:function(e,t){e.status},changeUpload1:function(e,t){"ready"===e.status&&this.filerReadyUploadList1.push(e)},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&(this.dynamicTags.push(e),this.form.keywords=this.dynamicTags.toString()),this.inputVisible=!1,this.inputValue=""},onUpdate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateStatus=!0,0===e.fileRemoveList.length){t.next=4;break}return t.next=4,e.fileRemoveList.map(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.ossControllerList.delFile({filename:r.name});case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:if(0===e.filerReadyUploadList1.length){t.next=7;break}return t.next=7,e.$refs.uploadimage.submit();case 7:if(0===e.filerReadyUploadList.length){t.next=10;break}return t.next=10,e.$refs.upload.submit();case 10:if(0!==e.filerReadyUploadList1.length||0!==e.filerReadyUploadList.length){t.next=17;break}return t.next=13,e.$axios.requirementControllerList.updateRequireById(e.form);case 13:if(r=t.sent,2e4!==r.code){t.next=17;break}return t.next=17,e.$router.push("/seller/myservice");case 17:case"end":return t.stop()}}),t)})))()}}},l=o,c=(r("1900"),r("2877")),u=Object(c["a"])(l,a,n,!1,null,"05f1baaf",null);t["default"]=u.exports},d6ae:function(e,t,r){"use strict";r("6fc8")}}]);
//# sourceMappingURL=chunk-a0612fa4.e121b219.js.map