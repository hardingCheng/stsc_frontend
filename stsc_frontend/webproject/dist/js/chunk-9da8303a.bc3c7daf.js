(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9da8303a"],{e79f:function(e,t,a){},ee21:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-acceptance"},[a("h3",[e._v("本次服务验收")]),e._m(0),a("div",{staticClass:"service-acceptance-report"},[a("span",[e._v("验收相关报告：")]),0===e.acceptanceUploadFleList.length?a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/ph/stcsp/fileoss/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1,multiple:"","on-success":e.handleSuccess,"on-change":e.handleChange}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传pdf文件！")])],1):a("ul",e._l(e.acceptanceUploadFleList,(function(t,n){return a("li",{key:n},[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.pdfShow(t.fileUrl)}}},[e._v(e._s(t.fileName))])],1)})),0)],1),0===e.acceptanceUploadFleList.length?a("div",{staticClass:"service-acceptance-operation"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("确认验收")])],1):e._e()])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-acceptance-info"},[a("ul",[a("li",[e._v("监理人："),a("span",[e._v("杜先生")])]),a("li",[e._v("项目起止时间："),a("span",[e._v("2021年03月18日 — 2021年04月08日")])]),a("li",[e._v("监理人意见："),a("span",[e._v("上传完验收报告，等待监理人给出验收意见！")])])])])}],r=a("1da1"),i=(a("d81d"),a("fb6a"),a("1276"),a("ac1f"),a("d3b7"),a("25f0"),a("96cf"),{props:["orderid","type"],name:"ServiceAcceptance",data:function(){return{fileList:[],filerReadyUploadList:[],uploadFileNum:0,uploadFileUrl:"",acceptanceUploadFleList:[]}},methods:{submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},pdfShow:function(e){window.open("/pdf/web/viewer.html?file="+e)},handleSuccess:function(e,t,a){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(2e4!==e.code||""===e.data.url){t.next=10;break}if(n.uploadFileNum++,n.uploadFileUrl=n.uploadFileUrl+e.data.url+",",console.log(n.uploadFileNum),n.uploadFileNum!==n.filerReadyUploadList.length){t.next=10;break}return console.log(n.uploadFileNum),t.next=8,n.$axios.orderControllerList.setServerUploadFile({attachments:n.uploadFileUrl},{orderId:n.orderid});case 8:a=t.sent,console.log(a);case 10:case"end":return t.stop()}}),t)})))()},handleChange:function(e,t){"ready"===e.status&&this.filerReadyUploadList.push(e)},getAcceptanceUploadFle:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.orderControllerList.getAcceptanceUploadFle({orderId:e.orderid});case 2:a=t.sent,2e4===a.code&&a.data.fileurls.split(",").slice(0,-1).map((function(t){e.acceptanceUploadFleList.push({fileName:t.split("/").slice(-1)[0].split("_").slice(1).toString(),fileUrl:t})}));case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAcceptanceUploadFle();case 2:case"end":return t.stop()}}),t)})))()}}),o=i,c=(a("ef49"),a("2877")),s=Object(c["a"])(o,n,l,!1,null,"39bc3492",null);t["default"]=s.exports},ef49:function(e,t,a){"use strict";a("e79f")}}]);
//# sourceMappingURL=chunk-9da8303a.bc3c7daf.js.map