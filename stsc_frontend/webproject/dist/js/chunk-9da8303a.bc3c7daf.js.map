{"version":3,"sources":["webpack:///./src/views/personal-center/seller/order-details/ServiceAcceptance.vue?f322","webpack:///src/views/personal-center/seller/order-details/ServiceAcceptance.vue","webpack:///./src/views/personal-center/seller/order-details/ServiceAcceptance.vue?9358","webpack:///./src/views/personal-center/seller/order-details/ServiceAcceptance.vue","webpack:///./src/views/personal-center/seller/order-details/ServiceAcceptance.vue?fd90"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_m","acceptanceUploadFleList","length","ref","attrs","handlePreview","handleRemove","fileList","handleSuccess","handleChange","slot","_l","item","index","key","on","$event","pdfShow","fileUrl","_s","fileName","submitUpload","_e","staticRenderFns","props","name","data","filerReadyUploadList","uploadFileNum","uploadFileUrl","methods","$refs","upload","submit","console","log","file","window","open","status","push","component"],"mappings":"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","file":"js/chunk-9da8303a.bc3c7daf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"service-acceptance\"},[_c('h3',[_vm._v(\"本次服务验收\")]),_vm._m(0),_c('div',{staticClass:\"service-acceptance-report\"},[_c('span',[_vm._v(\"验收相关报告：\")]),(_vm.acceptanceUploadFleList.length === 0)?_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":\"/ph/stcsp/fileoss/upload\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"file-list\":_vm.fileList,\"auto-upload\":false,\"multiple\":\"\",\"on-success\":_vm.handleSuccess,\"on-change\":_vm.handleChange}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传pdf文件！\")])],1):_c('ul',_vm._l((_vm.acceptanceUploadFleList),function(item,index){return _c('li',{key:index},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.pdfShow(item.fileUrl)}}},[_vm._v(_vm._s(item.fileName))])],1)}),0)],1),(_vm.acceptanceUploadFleList.length === 0)?_c('div',{staticClass:\"service-acceptance-operation\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"确认验收\")])],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"service-acceptance-info\"},[_c('ul',[_c('li',[_vm._v(\"监理人：\"),_c('span',[_vm._v(\"杜先生\")])]),_c('li',[_vm._v(\"项目起止时间：\"),_c('span',[_vm._v(\"2021年03月18日 — 2021年04月08日\")])]),_c('li',[_vm._v(\"监理人意见：\"),_c('span',[_vm._v(\"上传完验收报告，等待监理人给出验收意见！\")])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"service-acceptance\">\n    <h3>本次服务验收</h3>\n    <div class=\"service-acceptance-info\">\n      <ul>\n        <li>监理人：<span>杜先生</span></li>\n        <li>项目起止时间：<span>2021年03月18日 — 2021年04月08日</span></li>\n        <li>监理人意见：<span>上传完验收报告，等待监理人给出验收意见！</span></li>\n      </ul>\n    </div>\n    <div class=\"service-acceptance-report\">\n      <span>验收相关报告：</span>\n      <el-upload\n          class=\"upload-demo\"\n          ref=\"upload\"\n          action=\"/ph/stcsp/fileoss/upload\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleRemove\"\n          :file-list=\"fileList\"\n          :auto-upload=\"false\"\n          multiple\n          :on-success=\"handleSuccess\"\n          :on-change=\"handleChange\"\n          v-if=\"acceptanceUploadFleList.length === 0\"\n      >\n        <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n<!--        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">上传到服务器</el-button>-->\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传pdf文件！</div>\n      </el-upload>\n      <ul v-else >\n        <li v-for=\"(item,index) in  acceptanceUploadFleList\" :key=\"index\"><el-button type=\"text\" @click=\"pdfShow(item.fileUrl)\">{{item.fileName}}</el-button></li>\n      </ul>\n    </div>\n    <div class=\"service-acceptance-operation\" v-if=\"acceptanceUploadFleList.length === 0\">\n      <el-button type=\"primary\" @click=\"submitUpload\">确认验收</el-button>\n    </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  props:['orderid','type'],\n  name: \"ServiceAcceptance\",\n  data(){\n    return {\n      fileList:[],\n      filerReadyUploadList:[],\n      uploadFileNum:0,\n      uploadFileUrl:'',\n      acceptanceUploadFleList:[]\n    }\n  },\n  methods:{\n    submitUpload() {\n      this.$refs.upload.submit();\n    },\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    pdfShow(fileUrl){\n      window.open('/pdf/web/viewer.html?file=' + fileUrl);\n    },\n    async handleSuccess(response,file, fileList) {\n      if (response.code === 20000 && response.data.url !== \"\"){\n        this.uploadFileNum++\n        this.uploadFileUrl = this.uploadFileUrl + response.data.url + ','\n        console.log(this.uploadFileNum)\n        if (this.uploadFileNum === this.filerReadyUploadList.length){\n          console.log(this.uploadFileNum)\n          let result = await this.$axios.orderControllerList.setServerUploadFile({\n            attachments:this.uploadFileUrl\n          },{\n            orderId:this.orderid\n          })\n          console.log(result)\n        }\n      }\n    },\n    handleChange(file, fileList) {\n      if (file.status === \"ready\"){\n        this.filerReadyUploadList.push(file)\n      }\n    },\n    async getAcceptanceUploadFle(){\n      let result = await this.$axios.orderControllerList.getAcceptanceUploadFle({\n        orderId:this.orderid\n      })\n      if (result.code === 20000){\n        result.data.fileurls.split(',').slice(0,-1).map((item) => {\n          this.acceptanceUploadFleList.push({\n            fileName:item.split('/').slice(-1)[0].split('_').slice(1).toString(),\n            fileUrl:item\n          })\n        })\n      }\n    }\n  },\n  async mounted(){\n    await this.getAcceptanceUploadFle()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.service-acceptance {\n  width: 100%;\n  box-sizing: border-box;\n  padding:40px;\n  background: #FFFFFF;\n  box-shadow: 0px 2px 4px 3px #E1E1E1;\n  border-radius: 4px;\n  margin-bottom:20px;\n  h3 {\n    font-size: 18px;\n    margin-bottom: 18px;\n  }\n  .service-acceptance-info {\n    ul>li {\n      margin-bottom:30px;\n      &:last-child>span {\n        color: #01AD3F;\n      }\n    }\n  }\n  .service-acceptance-report {\n    display:flex;\n    justify-content:flex-start;\n    width: 100%;\n    span {\n      line-height:40px;\n    }\n    .upload-demo {\n      width: 50%;\n    }\n    ul{\n      display:flex;\n      li {\n        margin-right: 30px;\n      }\n    }\n  }\n  .service-acceptance-operation {\n    width: 100%;\n    text-align: center;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceAcceptance.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceAcceptance.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ServiceAcceptance.vue?vue&type=template&id=39bc3492&scoped=true&\"\nimport script from \"./ServiceAcceptance.vue?vue&type=script&lang=js&\"\nexport * from \"./ServiceAcceptance.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ServiceAcceptance.vue?vue&type=style&index=0&id=39bc3492&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39bc3492\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ServiceAcceptance.vue?vue&type=style&index=0&id=39bc3492&lang=scss&scoped=true&\""],"sourceRoot":""}